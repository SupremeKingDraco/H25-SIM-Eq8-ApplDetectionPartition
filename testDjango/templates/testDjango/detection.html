<!DOCTYPE html>
{% load static %}

<html lang="fr">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Detection</title>
    <link rel="stylesheet" href="{% static 'css/traducteurPage.css' %}">
    <script src="{% static 'js/main.js' %}" defer></script>
    <!-- Fixed Button -->
    <button class="fixed-button">Partition</button>
    <style>
        #display-area {
            background-color: white;
            padding: 20px;
            margin-top: 20px;
            color: black; /* Ensure text is black */
        }
        #input-data {
            white-space: pre-wrap; /* Preserve whitespace and line breaks */
            word-wrap: break-word; /* Break long words */
        }
    </style>
</head>
<body>

<!-- Video Background -->
<div class="video-background">
  <video autoplay muted loop>
    <source src="{% static 'image/web page final background.mp4' %}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

<div style="background-color: rgba(0, 0, 0, 0.8); width: 1300px;height: 700px;">
    <h3> Bonjour et bienvenu à notre détecteur de partition</h3>

    <label for="userInput">Entrez votre texte :</label>
    <input type="text" id="userInput" name="userInput" placeholder="Tapez ici...">
    <hr>
    <p class="btn-group">
        <button style="width:50%" id="button1" onclick="handleButtonClick(3)">Traitement image</button>
        <button style="width:50%" id="button2" onclick="handleButtonClick(1)">Traitement audio</button>
    </p>
    <!-- Placeholder for dynamically created inputs -->
    <div id="dynamic-inputs" class="input-container"></div>
</div>

<!-- Display Area for Input Data -->
<div id="display-area">
    <h4>Input Data:</h4>
    <pre id="input-data"></pre>
</div>

<script>
  /**
   * Function to create dynamic text input fields
   * @param {number} count - Number of input fields to create
   */
  function createInputs(count) {
    // Clear any previously created inputs
    const inputContainer = document.getElementById('dynamic-inputs');
    inputContainer.innerHTML = '';

    // Define tagName based on count
    let tagName = [];
    if (count == 1) {
        tagName = ["Selectionner le seuil de décibel. (recommander entre -40 et -10)"];
    } else if (count == 3) {
        tagName = ["earth", "air", "fire"];
    }

    // Create the specified number of input fields
    for (let i = 0; i < count; i++) {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = tagName[i] || "default"; // Fallback to "default" if tagName[i] is undefined

        // Dynamically adjust font size and width for count == 1
        if (count == 1) {
            input.style.fontSize = "20px"; // Increase font size for better visibility
            input.style.width = `${tagName[i].length * 10}px`; // Adjust width based on placeholder text length
        }

        inputContainer.appendChild(input);
    }
}

  /**
   * Function to handle button click events
   * @param {number} count - Number of input fields to create
   */
  function handleButtonClick(count) {
    createInputs(count);
    // Add event listener to the submit button or any other trigger
    document.getElementById('submitButton').addEventListener('click', () => {
      retrieveInputData();
    });
  }

  /**
   * Function to retrieve input data from the page
   */
  function retrieveInputData() {
    // Get the value from the static input field
    const userInput = document.getElementById('userInput').value;
    console.log('User Input:', userInput);

    // Get the values from the dynamically created input fields
    const dynamicInputs = document.querySelectorAll('#dynamic-inputs input');
    const dynamicInputValues = [];
    dynamicInputs.forEach((input, index) => {
      console.log(`Dynamic Input ${index + 1}:`, input.value);
      dynamicInputValues.push(input.value);
    });

    // Display the data in the display area
    displayInputData(userInput, dynamicInputValues);

    // Process the data as needed
    processData(userInput, dynamicInputs);
  }

  /**
   * Function to display input data on the webpage
   * @param {string} userInput - Value from the static input field
   * @param {array} dynamicInputValues - Values from the dynamically created input fields
   */
  function displayInputData(userInput, dynamicInputValues) {
    const displayArea = document.getElementById('input-data');
    displayArea.innerHTML = `User Input: ${userInput}\n`;
    dynamicInputValues.forEach((value, index) => {
      displayArea.innerHTML += `Dynamic Input ${index + 1}: ${value}\n`;
    });
  }

  /**
   * Function to process the retrieved data
   * @param {string} userInput - Value from the static input field
   * @param {NodeList} dynamicInputs - Values from the dynamically created input fields
   */
  function processData(userInput, dynamicInputs) {
    // Example processing: Log the data to the console
    console.log('Processing Data:');
    console.log('User Input:', userInput);
    dynamicInputs.forEach((input, index) => {
      console.log(`Dynamic Input ${index + 1}:`, input.value);
    });

    // Add your data processing logic here
  }

  // Add a submit button to trigger data retrieval
  const submitButton = document.createElement('button');
  submitButton.id = 'submitButton';
  submitButton.textContent = 'Submit';
  document.body.appendChild(submitButton);
</script>

</body>
</html>
